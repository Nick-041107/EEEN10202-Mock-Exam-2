;??????????switch???
    
processor 18F8722
radix dec
 
CONFIG OSC = HS 
CONFIG WDT = OFF 
CONFIG LVP = OFF 
 
#include <xc.inc>
    
PSECT udata_acs
global switches     ; ????"switch"
switches: ds 1      ; ???????????"switch"? ??????????"??"??
    
PSECT resetVector, class=CODE, reloc=2
resetVector:
goto start

PSECT start, class=CODE, reloc=2
start:
    movlw 0x0F
    movwf 0xFC1, a  ; ???????
   
    movlw 11110000B ; ??RH4-7(???4?switch)????0-3???
    movwf TRISH, a
   
    movlw 00111100B ; ??RC2-5???(???4?switch)?????????
    movwf TRISC, a
   
    movlw 00000000B ; ??PORT F????
    movwf TRISF, a
    
    movlw 11101111B ; ??RA4 ???
    movwf TRISA, a
   
    movlw 00010000B ; ??RA4
    movwf LATA, a
  
   
    
L_MAIN:
    movf PORTC, W, a     ; ??PORT C???W
    movwf switches, a    ; ??????switch
   
    rrncf switches, f, a ; ?PORT C????????????????? !!! (???????switch????RC2-5)
    rrncf switches, W, a ; ?PORT C?????????
    andlw 00001111B      ; ?????????(???????4?)
   
    movwf switches, a    ; ????????switch
    
    movf PORTH, W, a     ; ??PORT H????W
    andlw 11110000B      ; ?????????(???????4?)
    iorwf switches, W, a ; ??switch?????W????switch?????OR??(???????)?????W
    
   
    movwf LATF, a        ; ??????PORT F
   
   
    
    bra L_MAIN
end



